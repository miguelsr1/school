<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Juego de Vocabulario JSF</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                margin: 0;
                background-color: #e8f5e9; /* Light green background */
            }
            .container {
                background-color: white;
                padding: 40px;
                border-radius: 15px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                text-align: center;
                max-width: 700px;
                width: 90%;
                animation: fadeIn 0.8s ease-out;
            }
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(-20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            h1 {
                color: #2e7d32; /* Darker green for title */
                margin-bottom: 30px;
                font-size: 2.2em;
            }
            .sentence-display {
                background-color: #f0f4c3; /* Light yellow background for sentence */
                padding: 25px;
                border-radius: 10px;
                margin-bottom: 35px;
                font-size: 1.4em;
                line-height: 1.6;
                color: #424242;
                text-align: left;
                box-shadow: inset 0 1px 5px rgba(0, 0, 0, 0.05);
            }
            .highlight {
                font-weight: bold;
                color: #d32f2f; /* Red for highlighted word */
                text-decoration: underline;
                padding: 2px 5px;
                border-radius: 4px;
                background-color: rgba(255, 0, 0, 0.08);
            }
            .options-grid {
                display: grid;
                grid-template-columns: 1fr 1fr; /* Two columns */
                gap: 15px;
                margin-bottom: 30px;
            }
            .option-button {
                background-color: #bbdefb; /* Light blue for options */
                color: #3f51b5; /* Dark blue text */
                border: none;
                padding: 15px 20px;
                font-size: 1.15em;
                cursor: pointer;
                border-radius: 8px;
                transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
                text-align: center;
                white-space: normal; /* Allow text to wrap */
            }
            .option-button:hover:not(:disabled) {
                background-color: #90caf9; /* Slightly darker blue on hover */
                transform: translateY(-3px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }
            .option-button:active:not(:disabled) {
                transform: translateY(0);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }
            .option-button:disabled {
                background-color: #e0e0e0;
                color: #888888;
                cursor: not-allowed;
                opacity: 0.7;
            }
            .feedback-message {
                font-size: 1.3em;
                font-weight: bold;
                margin-top: 25px;
                margin-bottom: 25px;
                min-height: 30px; /* To prevent layout shift */
            }
            .feedback-correct {
                color: #388e3c; /* Green for correct */
            }
            .feedback-incorrect {
                color: #d32f2f; /* Red for incorrect */
            }
            .next-button, .start-button {
                background-color: #4caf50; /* Green for action buttons */
                color: white;
                border: none;
                padding: 12px 25px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1.1em;
                transition: background-color 0.3s;
                margin-top: 20px;
            }
            .next-button:hover, .start-button:hover {
                background-color: #388e3c;
            }
            .game-over-message {
                font-size: 1.5em;
                color: #1a237e; /* Dark blue */
                font-weight: bold;
                margin-top: 40px;
            }
        </style>
    </h:head>
    <h:body>
        <div class="container">
            <h1>Â¡Aprende Vocabulario!</h1>

            <h:form id="vocabularioForm">
                <h:panelGroup rendered="#{vocabularioBean.juegoTerminado}" layout="block" styleClass="game-over-message">
                    <h:outputText value="#{vocabularioBean.mensaje}" />
                    <h:commandButton value="Reiniciar Juego" action="#{vocabularioBean.inicializarPreguntas}" styleClass="start-button">
                        <f:ajax execute="@form" render="@form" />
                    </h:commandButton>
                </h:panelGroup>

                <h:panelGroup rendered="#{!vocabularioBean.juegoTerminado}">
                    <div class="sentence-display">
                        <h:outputText value="#{vocabularioBean.preguntaActual.oracionConResaltado}" escape="false" />
                    </div>

                    <div class="options-grid">
                        <ui:repeat value="#{vocabularioBean.preguntaActual.opciones}" var="opcion">
                            <h:commandButton value="#{opcion}"
                                             action="#{vocabularioBean.seleccionarOpcion(opcion)}"
                                             styleClass="option-button"
                                             disabled="#{vocabularioBean.preguntaRespondida}">
                                <f:ajax execute="@form" render="@form" />
                            </h:commandButton>
                        </ui:repeat>
                    </div>

                    <h:panelGroup layout="block" styleClass="feedback-message #{vocabularioBean.respuestaCorrecta ? 'feedback-correct' : 'feedback-incorrect'}">
                        <h:outputText value="#{vocabularioBean.mensaje}" />
                    </h:panelGroup>

                    <h:commandButton value="Siguiente Pregunta" action="#{vocabularioBean.cargarSiguientePregunta}" styleClass="next-button"
                                     rendered="#{vocabularioBean.preguntaRespondida}">
                        <f:ajax execute="@form" render="@form" />
                    </h:commandButton>
                </h:panelGroup>
            </h:form>
        </div>
    </h:body>
</html>